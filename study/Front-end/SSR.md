# Server Side Rendering

## SSR 이란

- 사용자가 웹페이지에 접근할 때 서버에 페이지에 대한 요청이 이뤄지고 서버에서 리소스를 해석하고 렌더링하여 반환

### CSR vs SSR

#### 초기 로딩 속도

- CSR은 페이지 읽는 시간 + JS 읽는 시간 + JS가 화면을 그리는 시간이 이후 콘텐츠가 노출
- SSR은 view를 렌더링 하여 가져오기 때문에 view를 보기 까지 초기 구동 속도가 빠르다.

#### SEO

- Search Engine Optimization
- 웹 크롤러, 봇들이 JS를 실행시키기 못하는 문제로 인해 CSR을 빈페이지로 인식하는 경우가 많다.

#### 보안

- SSR에서는 사용자 정보를 서버에서 세션으로 관리할 수 있지만 CSR은 쿠키 이외에 마땅한 공간이 없다.

## SSR 구현(React)

### Node.js 에서 React SSR

1. babel-node 를 통해 런타임에서 babel 사용
- 프로덕션에선 좋지 않는 방식입니다. 
- 서버에서 코드를 변환하기 위하여 불필요한 자원이 사용된다.

2. babel-register 를 서버에서 불러와서 사용
- 런타임에서 코드를 변환하여 사용하는 방식이며 1번과 같은 이유로 추천되지 않는다.

3. babel 을 통하여 서버를 빌드한 다음에 사용
- 서버를 실행하기전에 사전에 코드를 트랜스파일 하여 서버를 실행하는 것
- 서버를 수정 할 때마다 다시 트랜스파일링을 해야하므로, 개발중엔 코드를 수정할때마다 중간 중간 딜레이가 발생하는 단점.

4. webpack 을 통하여 리액트 관련 코드만 미리 빌드해서 사용
- 성능상에서, 그리고 개발 흐름상에서 가장 괜찮은 방법
- 결국 babel은 리액트쪽 코드에서만 사용되므로 리액트 관련 코드를 미리 webpack 으로 번들링 한 것을 그냥 require 로 불러와서 사용하는 방식.

[ref1](https://brownbears.tistory.com/411)
[ref2](https://velopert.com/3425)